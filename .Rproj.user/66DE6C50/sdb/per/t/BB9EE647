{
    "contents" : "---\ntitle       : Developing Data Products\nsubtitle    : MPG Lienar Regression\nauthor      : Marcelo Gomes Marques\ndate        : Monday, June 23, 2014\noutput      : ioslides_presentation\nframework   : html5slides   # {io2012, html5slides, shower, dzslides, ...}\nhighlighter : highlight.js  # {highlight.js, prettify, highlight}\nhitheme     : mpg, prediction, linear regression \nwidgets     : bootstrap     # {mathjax, quiz, bootstrap}\nmode        : selfcontained # {standalone, draft}\n\n---\n```{r GettingAndClennig, echo=FALSE, eval=TRUE, results='hide'}\nlibrary(datasets)\ndata(mtcars)\nsummary(mtcars)\nstr(mtcars)\n# With the summary and str analysis, we can see that a few data preparation is need to tidy the dataset, only need coerce some variables to class factor and logic as need.\n\nmtcars$am <- mtcars$am == 0\nnames(mtcars)[9] <- \"automatic\"\nmtcars$vs <- mtcars$vs == 1\nmtcars$cyl <- factor(mtcars$cyl)\nmtcars$gear <- factor(mtcars$gear)\nmtcars$carb <- factor(mtcars$carb)\n\n## First, the mtcars is attached to the R search path. This means that the mtcars dataset is searched by R when evaluating a variable, so columns in the dataset can be accessed by simply giving their names.\nattach(mtcars)\n```  \n\n\n## The Idea\nNow a days is too important think better about best opptions to improve motors performance, even more if we concider energy efficience. \n\nWith this in mind, It's interesting find a way to predict **MPG** (*Miles/(US) gallon*) ussing a single linear regressing model between MPG and othes significants terms find in the mtcars dataset from datasets libriry. \n\nOur application allows to cross the result of a prediction with the existing data, and we can dynamically change both the graph as the input data for the prediction and see the effect on-line.\n\n## Exporatory Analysis\n```{r Explor1, echo=FALSE, eval=TRUE, results='hold'}\npar(mfrow=c(3,3),mar=c(4,4,1,1), cex=0.3, cex.main=1.5)\nboxplot(mpg ~ automatic, data=mtcars, names=c('Manual', 'Automatic'), main=\"MPG by Transmission Type\")\nboxplot( mpg ~ cyl, data = mtcars, main=\"MPG by Number of Cylinders\")\nboxplot( mpg ~ cyl*automatic, data = mtcars, main=\"MPG by Number of Cylinders and Transmission Type\")\n\nplot(wt, mpg, col=automatic + 3, main=\"wt x MPG by Transmission Type\")\nabline(lm(mpg~wt,data=mtcars[automatic==F,]),  col=4)\nabline(lm(mpg~wt,data=mtcars[automatic==T,]),  col=3)\n\nplot(disp, mpg, col=automatic + 3, main=\"disp x MPG by Transmission Type\")\nabline(lm(mpg~disp,data=mtcars[automatic==F,]),  col=4)\nabline(lm(mpg~disp,data=mtcars[automatic==T,]),  col=3)\n\nplot(hp, mpg,  col=automatic + 3, main=\"hp x MPG by Transmission Type\")\nabline(lm(mpg~hp,data=mtcars[automatic==F,]),  col=4)\nabline(lm(mpg~hp,data=mtcars[automatic==T,]),  col=3)\n\nplot(qsec, mpg, col=automatic + 3, main=\"qsec x MPG by Transmission Type\")\nabline(lm(mpg~qsec,data=mtcars[automatic==FALSE,]),  col=4)\nabline(lm(mpg~qsec,data=mtcars[automatic==TRUE,]),  col=3)\n\nplot(drat, mpg,  col=automatic + 3, main=\"drat x MPG by Transmission Type\")\nabline(lm(mpg~drat,data=mtcars[automatic==F,]),  col=4)\nabline(lm(mpg~drat,data=mtcars[automatic==T,]),  col=3)\n\n```  \n<p style=\"font-size: 75%;\">Look this distributions and their linear regressions, we expect a good model with start with automatic and include hp and wt or disp, since the last two appears similars. The drat and qseq maybe change the signal of our others coefficients, and tend to suffer with their outliers.</p>  \n\n## The Prediction Model  \n\nOur analysis identify a better model **lm(mpg ~ automatic + hp + wt +I(cyl==6) )**, wath is confirmed by anova function evaluation.  This model presents a good predictions of MPG, with:  \n```{r RMopt5, echo=FALSE, eval=TRUE, results='hide'}\nfitOpt5 <- lm( mpg ~ automatic + hp + wt +I(cyl==6) , data=mtcars )\nsm <- summary(fitOpt5)\n\n```  \n- Minus residuals, where's we can see a **decrease MPG in -2.266 if the transmission is automatic** \n- **Attend** our choose of **10% to likelihood ration test** apply at all coefficients.  \n- The **Residual standard error**, now to **`r sm$sigma`** on `r max(sm$df)` degrees of freedom, <u>our best</u>.  \n```{r RMprint, echo=FALSE, eval=TRUE, results='hold'}\nprint(sm$coefficients)\n``` \n\n## Model Results and Residuals Analisis\n\n```{r summaryData, echo=FALSE, eval=TRUE, results='hold'}\npar(mfrow=c(2,3))\nhist(fitOpt5$residuals, main=\"Best Model Plots:\")\nplot(fitOpt5)\n```\n<p style=\"font-size: 75%;\">**Note**: The influence of other cylinders (4 and 8) is too similar, with same impact, and don't change  much the model performance, so we use model **lm(mpg ~ automatic + hp + wt + cyl)** to apply in our application for you can see it by yourself.</p>\n",
    "created" : 1403568159580.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2267541453",
    "id" : "BB9EE647",
    "lastKnownWriteTime" : 1403575561,
    "path" : "C:/Users/Marcelo/DDP_PA/index.Rmd",
    "project_path" : "index.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}